{"version":3,"sources":["../Shared/Cache.ts","../Shared/User.ts","../Shared/UserConstructor.ts","../Shared/Users.ts","../Shared/BrowserRepo.ts","../Shared/BrowserUsers.ts","../Shared/InMemoryBrowserUsers.ts","entry.ts","../Shared/IUsers.ts"],"names":[],"mappings":"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","file":"compiled.js","sourcesContent":["export interface IIndexableObject {\n    id: string;\n}\n\nexport interface ICache<T> {\n    update(item: T): Thenable<T[]>;\n    add(item: T): Thenable<T[]>;\n    get(): Thenable<T[]>;\n    getById(id: string): Thenable<T>;\n    set(items: T[]): Thenable<T[]>;\n}\n\nexport class GenericCache implements ICache<IIndexableObject> {\n    store: IIndexableObject[];\n\n    constructor() {\n        this.store = [];\n    }\n\n    update(item: any): Thenable<any[]> {\n        for (let i = 0; i < this.store.length; i++) {\n            if (item.id === this.store[i].id) {\n                this.store[i] = item;\n            }\n        }\n        return Promise.resolve(this.store);\n    }\n\n    add(item: any): Thenable<any[]> {\n        this.store.push(item);\n        return Promise.resolve(this.store);\n    }\n\n    get(): Thenable<any[]> {\n        return Promise.resolve(this.store);\n    }\n\n    getById(id: string): Thenable<any> {\n        const store = this.store.filter((x: any) => x.id === id);\n        if (store.length) {\n            return Promise.resolve(store[0]);\n        }\n        throw Error(\"Cannot find item by ID: \" + id);\n    }\n\n    set(items: IIndexableObject[]): Thenable<any[]> {\n        this.store = items;\n        return Promise.resolve(this.store);\n    }\n}","import {IIndexableObject} from \"./Cache\";\nexport class User implements IIndexableObject {\n    name: string;\n    id: string;\n    voted: boolean;\n    constructor(name: string, id: string) {\n        this.name = name;\n        this.id = id;\n        this.voted = false;\n    }\n}","import {User} from \"./User\";\n\nexport class UserConstructor {\n    static notEmpty(input) {\n        return (input !== \"\");\n    }\n    static createUsersByNames(names: Array<string>): User[] {\n        const filtered = names.filter(UserConstructor.notEmpty);\n        const users = filtered.map((v, i) => {\n            return this.createUser(v, i);\n        });\n        return users;\n    }\n    static createUser(name: string, index: number) {\n        return new User(name, \"user\" + index);\n    }\n}","import {User} from \"./User\";\nimport {GenericCache} from \"./Cache\";\nimport {IUserRepo} from \"./IUsers\";\nimport {UserConstructor} from \"./UserConstructor\";\n\nexport class InMemoryUsers implements IUserRepo {\n    cache: GenericCache;\n\n    constructor() {\n        this.cache = new GenericCache();\n        const users = UserConstructor.createUsersByNames([\n            \"Adam Hall\",\n            \"Billie Davey\",\n            \"Laura Rowe\",\n            \"Simon Dawson\"\n        ]);\n        this.setUsers(users);\n    }\n\n\n\n    addUser(user: User): Thenable<User[]> {\n        return this.cache.add(user);\n    }\n\n    addUserByName(name: string): Thenable<User[]> {\n        return this.cache.add(UserConstructor.createUser(name, 9));\n    }\n\n    updateUser(user: User): Thenable<User[]> {\n        return this.cache.update(user);\n    }\n\n\n    getUsers(): Thenable<Array<User>>  {\n        return this.cache.get();\n    }\n\n    getUser(id: string): Thenable<User> {\n        return this.cache.getById(id);\n    }\n\n    saveUser(user: User): Thenable<User[]> {\n        return this.cache.update(user);\n    }\n\n    setUsers(users: User[]): Thenable<User[]> {\n        return this.cache.set(users);\n    }\n}","import {IAllRepostiory} from \"./IUsers\";\n\nexport class BrowserRepo<T> implements IAllRepostiory<T> {\n    key: string;\n    br: Window;\n    constructor (key: string, window: Window) {\n        this.br = window;\n        this.key = key;\n    }\n    get(): Thenable<T> {\n        const text: string = this.br.localStorage.getItem(this.key);\n        const json: T = JSON.parse(text);\n        return Promise.resolve(json);\n    }\n    save(thing: T): Thenable<T> {\n        const text = JSON.stringify(thing);\n        this.br.localStorage.setItem(this.key, text);\n        return Promise.resolve(thing);\n    }\n\n}","import {User} from \"./User\";\nimport {BrowserRepo} from \"./BrowserRepo\";\nimport {IAllRepostiory, IAllUserRepostiory} from \"./IUsers\";\n\n\nexport class BrowserUsers implements IAllUserRepostiory {\n    repo: IAllRepostiory<User[]>;\n    constructor(window: Window) {\n        this.repo = new BrowserRepo<User[]>(\"users\", window);\n    }\n\n    getUsers(): Thenable<User[]> {\n        return this.repo.get();\n    }\n\n    saveUsers(users: User[]):  Thenable<User[]> {\n        return this.repo.save(users);\n    }\n}","\nimport {User} from \"./User\";\nimport {InMemoryUsers} from \"./Users\";\nimport {BrowserUsers} from \"./BrowserUsers\";\nimport {IAllUserRepostiory, IUserRepo} from \"./IUsers\";\n\nexport class InMemoryBrowserUsers implements IUserRepo  {\n    cache: InMemoryUsers;\n    repo: IAllUserRepostiory;\n    constructor(window: Window) {\n        this.cache = new InMemoryUsers();\n        this.repo = new BrowserUsers(window);\n    }\n    updateUser(user: User): Thenable<User[]> {\n        const prom = this.cache.updateUser(user);\n        prom.then(users => {\n            this.repo.saveUsers(users);\n        });\n        return prom;\n    }\n    addUser(user: User): Thenable<User[]> {\n        const prom = this.cache.addUser(user);\n        prom.then(users => {\n            this.repo.saveUsers(users);\n        });\n        return prom;\n    }\n    getUsers(): Thenable<User[]> {\n        const prom = this.repo.getUsers();\n        prom.then(users => {\n            this.cache.setUsers(users);\n        });\n        return prom;\n    }\n    getUser(id: string): Thenable<User> {\n        const result = this.cache.getUser(id);\n        return Promise.resolve(result);\n    }\n    setUsers(users: User[]): Thenable<User[]> {\n\n        const promCache = this.cache.setUsers(users);\n        const promRepo = this.repo.saveUsers(users);\n        return promCache;\n    }\n}","/// <reference path=\"../typings/d3/d3.d.ts\" />\n/// <reference path=\"../typings/es6-promise/es6-promise.d.ts\"/>\n/// <reference path=\"../typings/requirejs/require.d.ts\"/>\n/// <reference path=\"../Shared/InMemoryBrowserUsers.ts\"/>\n/// <reference path=\"../Shared/UserConstructor.ts\"/>\nrequirejs.config( {\n    baseUrl : \"/\"\n});\n\nlet users;\n\nrequire([\"Shared/InMemoryBrowserUsers\", \"Shared/UserConstructor\"], (u, c) => {\n    users = new u.InMemoryBrowserUsers(window);\n\n    class UIEntry {\n        constructor() {\n            document.getElementById(\"new\").addEventListener(\"mousedown\", () => {\n                UI.ClearUsers();\n            });\n            document.getElementById(\"user\").addEventListener(\"keyup\", (e: KeyboardEvent) => {\n                const code = e.keyCode;\n                if (code === 13) {\n                    AddUser();\n                }\n            });\n            document.getElementById(\"add\").addEventListener(\"mousedown\", () => {\n                AddUser();\n            });\n        }\n\n        AddUser(username) {\n\n            const textNode = document.createElement(\"span\");\n            textNode.setAttribute(\"class\", \"user\");\n            textNode.textContent = username;\n\n            const deleteButton = document.createElement(\"a\");\n            deleteButton.setAttribute(\"href\", \"void(0);\");\n            deleteButton.textContent = \"X\";\n            deleteButton.addEventListener(\"mousedown\", (e: MouseEvent) => {\n                const el = (<Element>e.target).parentNode;\n                this.ClearUser(el.textContent);\n\n                const usernames = UI.GetUsers();\n                saveUsers(usernames);\n\n            });\n\n            const newNode = document.createElement(\"li\");\n            newNode.appendChild(textNode);\n            newNode.appendChild(deleteButton);\n\n            document.getElementById(\"users\").appendChild(newNode);\n        }\n        ClearUser (username) {\n            const parent = document.getElementById(\"users\");\n            const nodeList = parent.childNodes;\n            for (let i = nodeList.length; i--; i > 0) {\n                if (username === nodeList[i].textContent) {\n                    document.getElementById(\"users\").removeChild(nodeList[i]);\n                }\n            }\n        }\n        ClearUsers () {\n            const parent = document.getElementById(\"users\");\n            const nodeList = parent.childNodes;\n            for (let i = nodeList.length; i--; i > 0) {\n                document.getElementById(\"users\").removeChild(nodeList[i]);\n            }\n        }\n        GetUsername (): string {\n            return (<HTMLInputElement>document.getElementById(\"user\")).value;\n        }\n        ShowError (error) {\n            alert(error);\n        }\n        ClearUsername () {\n            (<HTMLInputElement>document.getElementById(\"user\")).value = \"\";\n        }\n        FocusUsername () {\n            (<HTMLInputElement>document.getElementById(\"user\")).focus();\n        }\n        GetUsers (): Array<string> {\n            const entry = document.getElementById(\"users\").getElementsByClassName(\"user\");\n            const usernames = new Array<string>();\n            for (let i = 0; i < entry.length; i ++) {\n                usernames.push(entry.item(i).textContent);\n            }\n            return usernames;\n        };\n\n    }\n    const UI = new UIEntry();\n\n    const saveUsers = (usernames) => {\n        const newusers = c.UserConstructor.createUsersByNames(usernames);\n        users.setUsers(newusers).then((result) => {\n            console.log(\"Set users\", result);\n        });\n    };\n\n    const AddUser = () => {\n        const username = UI.GetUsername();\n        if (username) {\n            let usernames = UI.GetUsers();\n            const isUnique = !(usernames.filter((value) => {\n                return value === username;\n            }).length);\n            if (isUnique) {\n                UI.AddUser(username);\n                usernames = UI.GetUsers();\n                saveUsers(usernames);\n                UI.ClearUsername();\n                setTimeout(() => {\n                    UI.FocusUsername();\n                }, 10);\n            } else {\n                UI.ShowError(\"already entered user\" + username);\n            }\n        }\n    };\n\n    users.getUsers().then((data) => {\n        UI.ClearUsers();\n        UI.FocusUsername();\n        if (data && data.length) {\n            const strings: string[] = data.map((user) => {\n                return user.name;\n            });\n            for (let i = 0; i < strings.length; i++) {\n                UI.AddUser(strings[i]);\n            }\n        }\n    });\n\n});\n\n","import {User} from \"./User\";\n\nexport interface IAllRepostiory<T> {\n    get(): Thenable<T>;\n    save(thing: T):  Thenable<T>;\n}\n\nexport interface IAllUserRepostiory {\n    getUsers(): Thenable<User[]>;\n    saveUsers(user: User[]):  Thenable<User[]>;\n}\n\nexport interface IUserRepo {\n    getUsers(): Thenable<User[]>;\n    getUser(id: string): Thenable<User>;\n    updateUser(user: User): Thenable<User[]>;\n    setUsers(users: User[]): Thenable<User[]>;\n    addUser(user: User): Thenable<User[]>;\n}\n"]}