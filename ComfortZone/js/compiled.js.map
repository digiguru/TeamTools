{"version":3,"sources":["../Shared/Cache.ts","../Shared/User.ts","../Shared/UserConstructor.ts","../Shared/Users.ts","../Shared/BrowserRepo.ts","../Shared/BrowserUsers.ts","../Shared/InMemoryBrowserUsers.ts","ComfortUserChoice.ts","../Shared/Breadcrumb.ts","../Shared/BreadcrumbControl.ts","../Shared/Timed.ts","../Shared/FormUserChoice.ts","ComfortZones.ts","../Shared/Polar.ts","../Shared/Point.ts","GraphComfortBase.ts","../Shared/SVG.ts","GraphComfortEntry.ts","GraphComfortHistory.ts","Mediator.ts","comfort.ts","ComfortUserChoiceHistory.ts"],"names":[],"mappings":"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","file":"compiled.js","sourcesContent":["export interface IIndexableObject {\n    id:string;\n}\n\nexport interface ICache<T> {\n    update(item:T) : Thenable<T[]>;\n    add(item:T) : Thenable<T[]>;\n    get() : Thenable<T[]>;\n    getById(id:string) : Thenable<T>;\n    set(items:T[]) : Thenable<T[]>;\n}\n\nexport class GenericCache implements ICache<IIndexableObject> {\n    store:IIndexableObject[];\n    \n    constructor() {\n        this.store = [];\n    }\n    \n    update(item:IIndexableObject) : Thenable<IIndexableObject[]> {\n        for (var i = 0; i < this.store.length; i++) {\n            if (item.id === this.store[i].id) {\n                this.store[i] = item;\n            }\n        }\n        return Promise.resolve(this.store);\n    }\n\n    add(item:IIndexableObject) : Thenable<IIndexableObject[]> {\n        this.store.push(item);\n        return Promise.resolve(this.store);\n    }\n\n    get() : Thenable<IIndexableObject[]> {\n        return Promise.resolve(this.store);\n    }\n    \n    getById(id:string) : Thenable<IIndexableObject> {\n        const store = this.store.filter(function(x:IIndexableObject) {\n            return x.id === id;\n        });\n        if(store.length) {\n            return Promise.resolve(store[0]);\n        }\n        throw Error(\"Cannot find item by ID: \" + id);\n    }\n    \n    set(items:IIndexableObject[]) : Thenable<IIndexableObject[]> {\n        this.store = items;\n        return Promise.resolve(this.store);;\n    }\n}","import {IIndexableObject} from './Cache';\nexport class User implements IIndexableObject {\n    name: string;\n    id: string;\n    voted: boolean;\n    constructor(name:string, id:string) {\n        this.name = name;\n        this.id = id;\n        this.voted = false;\n    }\n}","import {User} from './User';\n\nexport class UserConstructor {\n    static notEmpty(input) {\n        return (input !== \"\");\n    }\n    static createUsersByNames(names:Array<string>) : User[] {\n        const filtered = names.filter(UserConstructor.notEmpty);\n        const users = filtered.map((v, i) => {\n            return this.createUser(v,i);\n        });\n        return users; \n    }\n    static createUser(name:string, index:number) {\n        return new User(name, \"user\"+index);\n    }\n}","import {User} from './User';\nimport {GenericCache} from './Cache';\nimport {IUserRepo} from './IUsers';\nimport {UserConstructor} from './UserConstructor';\n\nexport class InMemoryUsers implements IUserRepo {\n    cache : GenericCache;\n    \n    constructor() {\n        this.cache = new GenericCache();\n        var users = UserConstructor.createUsersByNames([\n            \"Adam Hall\",\n            \"Billie Davey\",\n            \"Laura Rowe\",\n            \"Simon Dawson\"\n        ]); \n        this.setUsers(users);\n    }\n\n    \n\n    addUser(user:User) : Thenable<User[]> {\n        return this.cache.add(user);\n    }\n    \n    addUserByName(name:string) : Thenable<User[]> {//Don't want this?\n        return this.cache.add(UserConstructor.createUser(name, 9));\n    }\n\n    updateUser(user:User) : Thenable<User[]> {\n        return this.cache.update(user);\n    }\n    \n\n    getUsers() : Thenable<Array<User>>  {\n        return this.cache.get();\n    }\n\n    getUser(id:string) : Thenable<User> {\n        return this.cache.getById(id);\n    }\n\n    saveUser(user:User) : Thenable<User[]> {\n        return this.cache.update(user);\n    }\n\n    setUsers(users:User[]) : Thenable<User[]> {\n        return this.cache.set(users);\n    }\n\n    \n}","import {IAllRepostiory} from './IUsers';\n\nexport class BrowserRepo<T> implements IAllRepostiory<T> {\n    key : string;\n    br : Window;\n    constructor (key:string, window:Window) {\n        this.br = window;\n        this.key = key;\n    }\n    get() : Thenable<T> {\n        const text : string = this.br.localStorage.getItem(this.key);\n        const json : T = JSON.parse(text);\n        return Promise.resolve(json);\n    }\n    save(thing:T) :  Thenable<T>{\n        const text = JSON.stringify(thing);\n        this.br.localStorage.setItem(this.key, text);\n        return Promise.resolve(thing);\n    }\n\n}","import {User} from './User';\nimport {BrowserRepo} from './BrowserRepo';\nimport {IAllRepostiory, IAllUserRepostiory} from './IUsers';\n\n\nexport class BrowserUsers implements IAllUserRepostiory {\n    repo : IAllRepostiory<User[]>;\n    constructor(window:Window) {\n        this.repo = new BrowserRepo<User[]>(\"users\", window);\n    }\n\n    getUsers() : Thenable<User[]> {\n        return this.repo.get();\n    }\n\n    saveUsers(users:User[]) :  Thenable<User[]> {\n        return this.repo.save(users);\n    } \n}","\nimport {User} from './User';\nimport {InMemoryUsers} from './Users';\nimport {BrowserUsers} from './BrowserUsers';\nimport {IAllUserRepostiory, IUserRepo} from './IUsers';\n\nexport class InMemoryBrowserUsers implements IUserRepo  {\n    cache:InMemoryUsers;\n    repo:IAllUserRepostiory;\n    constructor(window:Window) {\n        this.cache = new InMemoryUsers();\n        this.repo = new BrowserUsers(window);\n    }\n    updateUser(user:User) : Thenable<User[]> {\n        const prom = this.cache.updateUser(user);\n        prom.then(users => {\n            this.repo.saveUsers(users);\n        });\n        return prom;\n    }\n    addUser(user:User) : Thenable<User[]> {\n        const prom = this.cache.addUser(user);\n        prom.then(users => {\n            this.repo.saveUsers(users);\n        });\n        return prom;\n    }\n    getUsers() : Thenable<User[]> {\n        const prom = this.repo.getUsers();\n        prom.then(users => {\n            this.cache.setUsers(users);\n        });\n        return prom;\n    }\n    getUser(id:string) : Thenable<User> {\n        const result = this.cache.getUser(id);\n        return Promise.resolve(result);\n    }\n    setUsers(users:User[]) : Thenable<User[]> {\n        \n        const promCache = this.cache.setUsers(users);\n        const promRepo = this.repo.saveUsers(users);\n        return promCache;\n    }\n}","import {User} from '../Shared/User';\n\nexport class ComfortUserChoice {\n    user : User;\n    distance : number;\n    area : String;\n    constructor(user : User, distance : number, area : String) {\n        this.user = user;\n        this.distance = distance;\n        this.area = area;\n    }\n}","export class Breadcrumb {\n    name: string;\n    command: string;\n    params: any;\n    enabled: boolean;\n    constructor(name:string, command:string, params:any) {\n        this.name = name;\n        this.command = command;\n        this.params = params;\n        this.enabled = false;\n    }\n}","\nimport {Breadcrumb} from './Breadcrumb';\nexport class BreadcrumbControl {\n    items = new Array<Breadcrumb>();\n    public addBreadcrumb(name:string, command:string, params:any) {\n        this.items.push(new Breadcrumb(name, command, params));\n    }\n}","\n        \nexport class Timed {\n    public static for(milliseconds:number) :Thenable<number> {\n        const p: Thenable<Number> = new Promise((resolve)=>{\n            setTimeout(function() {\n                resolve(milliseconds);                    \n            }, milliseconds);\n        });\n        return p;\n    }\n}","import {User} from './User';\nimport {Timed} from './Timed';\nimport {InMemoryUsers} from './Users';\nimport {IUserRepo} from './IUsers';\n\nexport class FormUserChoice {\n    userZone : HTMLElement;\n    userRepo : IUserRepo;\n    d3Users : d3.Selection<any>;\n\n    constructor() {\n        this.userRepo = new InMemoryUsers(); //DI this\n        this.userZone = document.getElementById('users');\n        this.d3Users = d3.select(\"g#users\");\n        this.userRepo.getUsers().then((users) => {\n            if(users && users.length) {\n                this.setupUsers(users);\n                this.show();\n            }\n        });\n    }\n    public getUser(id) : Thenable<User> {\n        return this.userRepo.getUser(id);\n    }\n\n    public markUserDone (user:User) {\n        user.voted = true;\n        this.userRepo.updateUser(user).then(users => {\n            this.rebind(users);\n        });\n    }\n\n    private afterShow() {\n        console.log(\"ENDSHOW UserChocieForm\");\n        this.d3Users\n            .selectAll(\"rect\")\n            .on(\"mouseup\", this.clickUser());\n    }\n    public hasMoreUsers() : Thenable<boolean> { //Move to user repo?\n        return new Promise((resolve, reject) => {\n            this.userRepo.getUsers().then(users => {\n                const unvotedUsers = users.filter(function(x) {\n                    return !x.voted\n                });\n                if(unvotedUsers.length) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n            });\n        });\n        \n    }\n    public show():Thenable<number> {\n        console.log(\"SHOW UserChocieForm\");\n        d3.select(this.userZone)\n            .transition()\n            .duration(function() {\n                    return 800;\n            })\n            .style(\"fill-opacity\",1)\n            .attr(\"transform\", \"matrix(1,0,0,1,0,0)\");\n        \n        this.d3Users.selectAll(\"g\").attr(\"class\", function(e) {\n                if(e.voted) {\n                    return \"user-group-complete\";\n                } else {\n                    return \"user-group\";\n                }\n            })\n\n        return Timed.for(800).then(this.afterShow.bind(this));\n    }\n    public hide ():Thenable<number> {\n        console.log(\"HIDE userEntry\");\n        d3.select(this.userZone)\n            .transition()\n            .duration(function() {\n                    return 800;\n            })\n            .style(\"fill-opacity\",0)\n            .attr(\"transform\", \"matrix(2,0,0,2,-400,-90)\");\n        d3.select(\"g#users\")\n            .selectAll(\"rect\")\n            .on(\"mouseup\", function(e) {\n                console.log(\"NOCLICK User - This was clicked, but ignored\", this);\n            });\n        return Timed.for(800);\n        \n    }\n    private rebind(users:User[]): d3.selection.Update<User> {\n        return this.d3Users\n                .selectAll(\"circle\")\n                .data(users);\n    }\n    private clickUser () {\n        // 'that' is the instance of graph \n        const that = this;\n        return function(d:User, i:number) {\n            // 'this' is the DOM element \n            console.log(\"CLICK - User - up  UserChocieForm\");\n            //const name = this.getAttribute(\"data-name\");\n            const id = this.getAttribute(\"data-id\");\n\n            var event = new CustomEvent('selectUser', { \"detail\": {\"id\": id} });\n            document.dispatchEvent(event);\n            console.log(\"This was clicked\", that);\n        }\n    }\n    private overUser () {\n        // 'that' is the instance of graph \n        const that = this;\n        return function(d:User, i:number) {\n            // 'this' is the DOM element \n            d3.select(this.parentNode)\n            //const d3zones = d3.select(\"g#users\")\n                .selectAll(\"text\")\n                .transition()\n                .duration(250)\n                .style(\"fill\", function() {\n                    return \"#00D7FE\";  \n                });\n        }\n    }\n    private leaveUser() {\n        // 'that' is the instance of graph \n        const that = this;\n        return function(d:User, i:number) {\n            // 'this' is the DOM element \n            d3.select(this.parentNode)\n            //const d3zones = d3.select(\"g#users\")\n                .selectAll(\"text\")\n                .transition()\n                .duration(function() {\n                    return 250;\n                })\n                .style(\"fill\", function() {\n                    return \"grey\";    \n                });\n        }\n    }\n    private eachUser () {\n        const that = this;\n        return function(e, i) {\n            //Event.add(['mousedown'], this.stage, this.chooseUser);\n            //Event.add([\"mouseover\"], this, thisStage.checkOverUsers);\n            const d3Item = d3.select(this);\n\n            d3Item.append(\"rect\")\n                .attr(\"y\", function(e) {\n                    return 60 + (i * 90);\n                })\n                .attr(\"x\", 0)\n                .attr(\"width\", 800)\n                .attr(\"height\", 90)\n                .attr(\"data-name\", e.name)\n                .attr(\"data-id\", e.id)\n                .on(\"mouseover\", that.overUser())\n                .on(\"mouseleave\", that.leaveUser())\n                \n            d3Item.append(\"text\")      \n                .attr(\"class\", \"username\")\n                .attr(\"y\", function(e) {\n                    return 30 + ((i + 1) * 90);\n                })\n                .attr(\"x\", 60)\n                .attr(\"data-name\", e.name)\n                .style(\"font-size\", 60)\n                .style(\"font-family\", \"Share Tech Mono\")\n                .text(function(j) {\n                    return e.name;\n                });\n        }\n    }\n    \n    public addUser(user:User) {\n        this.userRepo.addUser(user).then(users => {\n            this.setupUsers(users);\n        });\n    }\n    \n    public setUsers(users:Array<User>) {\n        this.destroyUsers();\n        this.userRepo.setUsers(users).then((users) => {\n            this.setupUsers(users);\n            this.show();\n        });\n    }\n    private destroyUsers() {\n        d3.select(\"g#users\").selectAll(\"*\").remove();\n    }\n\n    private setupUsers (users:User[]) {\n        const items = this.rebind(users);\n        items.enter().append(\"g\")\n            .attr(\"id\", (e) => {\n                return e.id;\n            })\n            .each(this.eachUser());\n    }\n\n    \n}","\nexport class ComfortZones {\n    name : string;\n    radius: number;\n    constructor(name: string, radius: number) {\n        this.name = name;\n        this.radius = radius; \n    }\n}","\n\nexport class Polar {\n    radius:number;\n    angle:number;\n    constructor(radius:number, angle:number) {\n        this.radius = radius;\n        this.angle = angle;\n    }\n}\n","//import Polar = require('Polar');\n\nimport {Polar} from './Polar';\nexport class Point {\n    x : number;\n    y : number;\n\n    constructor(x:number, y:number) {\n        this.x = x;\n        this.y = y;\n    }\n    static fromCoords(coords:Array<number>) {\n        return new Point(coords[0],coords[1]);\n    }\n    public static fromOffset(point:Point, origin:Point):Point {\n        const dx = point.x - origin.x;\n        const dy = point.y - origin.y;\n        return new Point(dx,dy);\n    }\n    public static toOffset(point:Point, origin:Point):Point {\n        const dx = point.x + origin.x;\n        const dy = point.y + origin.y;\n        return new Point(dx,dy);\n    }\n    public static distance(point:Point , origin:Point):number {\n        const offset = Point.fromOffset(point, origin);\n        return Point.distanceFromOffset(offset);\n    }\n    public static distanceFromOffset(offset:Point):number {\n        return Math.sqrt(offset.x * offset.x + offset.y * offset.y);\n    }\n    public static toCartesianNoOffset(polar:Polar):Point {\n        const x = polar.radius * Math.cos(polar.angle);\n        const y = polar.radius * Math.sin(polar.angle);\n        return new Point(x, y); \n    }\n    public static toCartesian(polar:Polar,origin:Point):Point {\n        const point = Point.toCartesianNoOffset(polar);\n        return Point.toOffset(point,origin); \n    }\n    public static toPolar(point:Point, origin:Point):Polar {\n        const offset = Point.fromOffset(point, origin);\n        const radius = Point.distanceFromOffset(offset);\n        const angle = Math.atan2(offset.y, offset.x);\n        return new Polar(radius, angle);\n    }\n}\n//});\n","import {Timed} from '../Shared/Timed';\nimport {ComfortZones} from './ComfortZones';\nimport {Point} from '../Shared/Point';\n\n\nexport class GraphComfortBase {\n    chaos : HTMLElement;\n    stretch : HTMLElement;\n    comfort : HTMLElement;\n    centerPoint : Point;\n    \n    constructor() {\n        this.setupArea();\n    }\n\n    private setupArea () {\n        \n        \n        const zones = [new ComfortZones(\"stretch\",300), new ComfortZones(\"comfort\",100)];\n        const d3zones = d3.select(\"g#zones\")\n            .selectAll(\"circle\")\n            .data(zones);\n\n        d3zones.enter().append(\"circle\")\n            .attr(\"cx\", 400)\n                .attr(\"cy\", 400)\n                .attr(\"r\", 0)\n                .attr(\"class\", \"area\")\n                .attr(\"id\", function(d:ComfortZones) {\n                    return d.name;\n            });\n        \n\n        this.chaos = document.getElementById('chaos');\n        this.stretch = document.getElementById('stretch');\n        this.comfort = document.getElementById('comfort');\n        const centerX = Number(this.comfort.getAttribute('cx'));\n        const centerY = Number(this.comfort.getAttribute('cy'));\n        this.centerPoint = new Point(centerX,centerY);\n        \n\n    }\n    public hide():Thenable<number> {\n        console.log(\"HIDE comfortGRAPH\");\n        \n        const d3zones = d3.select(\"g#zones\")    \n            .selectAll(\"circle\")\n                .transition()\n                .duration(1000)\n                .attr(\"r\", 0);\n\n        const d3drops = d3.select(\"#stage\")\n            .selectAll(\"circle.dropper\")   \n            .transition()\n                .delay(250)\n                .duration(250)\n                .attr(\"r\", 0);\n        return Timed.for(1000);\n                \n    }\n    public showBase():Thenable<number> {\n        console.log(\"SHOW graph\");\n        const d3zones = d3.select(\"g#zones\")\n            .selectAll(\"circle\")\n                .attr(\"r\", 0)\n            .transition()\n                .duration(1000)\n                .delay(function(d, i) { return i * 100; })\n                .ease(\"elastic\")\n                .attr(\"r\", function(d:ComfortZones) { \n                    return d.radius; \n                }); \n        \n        return Timed.for(1000);\n        \n    }\n\n}","\nexport class SVG {\n    static element(tagName) {\n        return document.createElementNS(\"http://www.w3.org/2000/svg\", tagName);\n    }\n\n    static circle(r, x, y, className) {\n        const el = SVG.element(\"circle\");\n        el.setAttribute(\"r\", r);\n        el.setAttribute(\"cx\", x);\n        el.setAttribute(\"cy\", y);\n        el.setAttribute(\"class\", className);\n        return el;\n        //<circle id=\"stretch\" r=\"300\" cx=\"400\" cy=\"400\" />\n\n    }\n}","import {User} from '../Shared/User';\nimport {GraphComfortBase} from './GraphComfortBase';\nimport {Point} from '../Shared/Point';\nimport {SVG} from '../Shared/SVG';\n\nexport class GraphComfortEntry extends GraphComfortBase {\n    clickArea : HTMLElement;\n    currentUser:User;\n    dropper : SVGAElement;\n    \n    constructor() {\n        super();\n        this.clickArea = document.getElementById('clickable');\n        this.setupOverActivity();\n    }\n\n    public setupOverActivity () {\n        const that = this;\n        d3.select(\"#stage\").on(\"mousemove\", this.graphMove());//this.checkArea);\n    }\n\n    private setupClickActivity () {\n        console.log(\"SETUP graph click\");\n        d3.select(\"#stage\").on(\"mouseup\", this.graphUp());\n        d3.select(\"#stage\").on(\"mousedown\", this.graphDown());\n    }\n\n    private graphMove() {\n        /// 'that' is the instance of graph \n        const that : GraphComfortEntry = this;\n        return function(d:void, i:number) {\n            // 'this' is the DOM element \n            const coord = d3.mouse(this);\n            const distance = Point.distance(that.centerPoint, Point.fromCoords(coord));\n            const area = GraphComfortEntry.calculateDistance(distance);\n            that.highlight(area);\n        }\n    }\n\n    private graphUp() {\n        // 'that' is the instance of graph \n        const that : GraphComfortEntry = this;\n        return function(d:void, i :number) {\n            // 'this' is the DOM element \n            const coord = Point.fromCoords(d3.mouse(this));\n            const distance = Point.distance(that.centerPoint, coord);\n            const area = GraphComfortEntry.calculateDistance(distance);          \n            that.saveTheInteraction(area, distance);\n        }\n    }\n\n    private graphDown() {\n        // 'that' is the instance of graph \n        const that = this;\n        return function(d:void, i:number) {\n            // 'this' is the DOM element \n            const coord = Point.fromCoords(d3.mouse(this));\n            const el = SVG.circle(8, coord.x, coord.y, \"dropper\");\n            that.addDropper(el);\n        }\n    }\n\n    public highlight (area : string) {\n        //<circle id=\"stretch\" r=\"300\" cx=\"400\" cy=\"400\" />\n        //<circle id=\"comfort\" r=\"100\" cx=\"400\" cy=\"400\" />\n\n    \n        const d3zones = d3.select(\"svg\")\n            .selectAll(\".area\")\n            .transition()\n                .delay(function() {\n                    if(this.getAttribute(\"id\") === area) {\n                        return 0;\n                    }\n                    return 100;\n                })\n                .ease(\"cubic\")\n                .duration(function() {\n                    return 250;\n                })\n                .style(\"fill\", function() {\n                    if(this.getAttribute(\"id\") === area) {\n                        return \"rgb(0, 180, 219)\";\n                    }\n                    return \"#00D7FE\";\n                });\n        \n    }\n    \n\n    public addDropper (el : SVGAElement)  {\n        this.dropper = el;\n        document.getElementById('stage').insertBefore(el, this.clickArea);\n    }\n\n    public static calculateDistance(distance) {\n        if(distance < 100) {\n            return \"comfort\";\n        } else if (distance < 300) {\n            return \"stretch\";\n        } else {\n            return \"chaos\";\n        }\n    }\n\n\n    public removeInteractions () {\n        console.log(\"REMOVE activiteis from GraphComfortEntry\");\n        d3.select(\"#stage\").on(\"mouseup\", function() {\n            console.log(\"UNCLICK - Graphup - No longer interactive stage\");\n        });\n        d3.select(\"#stage\").on(\"mousedown\", function() {\n            console.log(\"UNCLICK - Graphdown - No longer interactive stage\");\n        });\n        d3.select(\"#stage\").on(\"mousemove\", function() {\n            console.log(\"UNMove - mousemove - No longer interactive stage\");\n        });\n        \n    }\n    public saveTheInteraction (area:string, distance:number) {\n        console.log(\"saveTheInteraction\");\n        this.removeInteractions();\n\n        //TODO: Put in the line below\n        var event = new CustomEvent('saveGraph', {\n            \"detail\": {\n                \"area\":area,\n                \"distance\":distance,\n                \"currentUser\":this.currentUser\n            }\n        });\n        document.dispatchEvent(event);\n        //mediator.saveGraph();\n    }\n    public show(user:User) {\n        this.currentUser = user;\n        const Thenable = this.showBase();\n        this.setupOverActivity();\n        return Thenable.then(this.setupClickActivity.bind(this));\n    }\n\n}","import {ComfortUserChoice} from './ComfortUserChoice';\nimport {GraphComfortBase} from './GraphComfortBase';\nimport {Point} from '../Shared/Point';\nimport {Polar} from '../Shared/Polar';\n\n\nexport class GraphComfortHistory extends GraphComfortBase {\n    \n    public graphData = new Array<ComfortUserChoice>();\n    public d3Points;\n    constructor() {\n        super(); \n        //this.setupHistory();\n    }\n\n    public show(graphData : Array<ComfortUserChoice>):Thenable<number> {\n        this.graphData = graphData;\n        const Thenable = this.showBase();\n        d3.select(\"g#history\")\n            .selectAll(\"circle\")\n            .data(this.graphData)\n                .enter()\n                .append(\"circle\")\n                .attr(\"cx\", 400)\n                .attr(\"cy\", 400)\n                .attr(\"r\", 10)\n                .attr(\"class\", \"point\")\n                .attr(\"id\", function(d:ComfortUserChoice) {\n                    return d.user.name;\n                });\n        const totalPoints = graphData.length;\n        const radian = 6.2831853072;//360 * Math.PI / 180;\n        const polarDivision = radian / totalPoints;\n        d3.select(\"g#history\")\n            .selectAll(\"circle\")\n            .transition()\n            .duration(function() {\n                return 800;\n            })\n            .attr(\"cx\", function(data:ComfortUserChoice, index) {\n                const angle = polarDivision * index;\n                return Point.toCartesian(new Polar(data.distance, angle), new Point(400,400)).x;\n            })\n            .attr(\"cy\", function(data:ComfortUserChoice, index) {\n                const angle = polarDivision * index;\n                return Point.toCartesian(new Polar(data.distance, angle), new Point(400,400)).y;\n            });\n\n\n        Thenable.then(function() {\n        console.log(\"SHOWED base graph - now what?\");\n        });\n        return Thenable;\n    }\n\n    public hide():Thenable<number> {\n        return null;\n    }\n}","import {ComfortUserChoice} from './ComfortUserChoice';\nimport {BreadcrumbControl} from '../Shared/BreadcrumbControl';\nimport {User} from '../Shared/User';\nimport {FormUserChoice} from '../Shared/FormUserChoice';\nimport {GraphComfortEntry} from './GraphComfortEntry';\nimport {GraphComfortHistory} from './GraphComfortHistory';\n\n\nexport class Mediator {\n\n    userChoiceHistory : Array<ComfortUserChoice>;\n    formUserChoice : FormUserChoice;\n    graphComfortEntry : GraphComfortEntry;\n    graphComfortHistory: GraphComfortHistory;\n    breadcrumbControl: BreadcrumbControl;\n    \n    constructor() {\n        console.log(\"START everything\");\n        this.userChoiceHistory = new Array<ComfortUserChoice>();\n        this.formUserChoice = new FormUserChoice();\n        this.breadcrumbControl = new BreadcrumbControl();\n    }\n\n    public do(command:string, params:any) {\n        switch (command)\n        {\n            case \"addUser\":\n                this.addUser(params);\n                break;\n            case \"setUsers\":\n                this.setUsers(params);\n                break;\n            case \"saveComfortFeedback\":\n                const area = params.area;\n                const distance = params.number;\n                const user = params.user;\n                this.saveGraph(area, distance, user);\n                break;\n            case \"showUserChoice\":\n                this.showUserChoice();\n                break;\n            case \"showGraphComfortHistory\":\n                this.showGraphComfortHistory();\n                break;\n            case \"showGraphComfortChoice\":\n                const comfortuser:User = params;\n                this.showGraphComfortEntry(comfortuser);\n                break;\n\n        }\n    }\n    \n    public addUser(user:User) {\n        this.formUserChoice.addUser(user);\n    }\n\n    public setUsers(users:Array<User>) {\n        this.formUserChoice.setUsers(users);\n    }\n\n    public showUserChoice() {\n        this.formUserChoice.show();\n    }\n\n    private showGraphComfortEntry(user:User) {\n        if(!this.graphComfortEntry) {\n            this.graphComfortEntry = new GraphComfortEntry();\n        }\n        this.graphComfortEntry.show(user);\n    }\n    \n    public showComfortHistory(history) {\n        var afterHide = function() {\n           if(!this.graphComfortHistory) {\n                this.graphComfortEntry = null;\n                this.graphComfortHistory = new GraphComfortHistory();\n            }\n            this.graphComfortHistory.show(history);\n        }.bind(this);\n        if (this.graphComfortEntry) {\n            this.graphComfortEntry.hide().then(afterHide);\n        } else {\n            if(this.formUserChoice) {\n                this.formUserChoice.hide();\n            }\n            afterHide();\n        }\n        \n       \n    }\n\n    private showGraphComfortHistory() {\n        if(!this.graphComfortHistory) {\n            this.graphComfortEntry = null;\n            this.graphComfortHistory = new GraphComfortHistory();\n        }\n        this.graphComfortHistory.show(this.userChoiceHistory);\n    }\n\n    public selectUser(id) {\n        console.log(\"ACTION selectUser\", id);\n        this.formUserChoice.getUser(id).then((user) => {\n            this.formUserChoice.hide();\n            this.showGraphComfortEntry(user);\n        });\n        \n    }\n\n    public saveGraph(area:string, distance:number, user:User) {\n        this.formUserChoice.markUserDone(user);\n        this.addUserChoiceHistory(area, distance, user);\n        this.next();\n    }\n\n    private addUserChoiceHistory(area:string, distance:number, user:User) {\n        const thisUserChoice = this.userChoiceHistory.filter(function(x) {\n            return x.user.id === user.id;\n        });\n        if(thisUserChoice.length) {\n            thisUserChoice[0].area = area;\n            thisUserChoice[0].distance = distance;\n        } else {\n            const userChoice = new ComfortUserChoice(user,distance,area);\n            this.userChoiceHistory.push(userChoice);\n        }\n    }  \n\n    private next() {\n        //const prom = new Promsie()\n        console.log(\"ACTION nextUser\", this);\n        var afterHide = function() {\n            this.formUserChoice.hasMoreUsers().then((result) => {\n                if (result) {\n                    console.log(\"Users left...\", this);\n                    this.showUserChoice();\n                } else {\n                    console.log(\"NO users left\", this);\n                    this.showGraphComfortHistory();\n                }\n            });\n        }.bind(this);\n        \n        this.graphComfortEntry.hide().then(afterHide);\n    }\n\n    //setupUsers\n    //\n}","/// <reference path=\"../typings/d3/d3.d.ts\" />\n/// <reference path=\"../typings/es6-promise/es6-promise.d.ts\"/>\n/// <reference path=\"../typings/requirejs/require.d.ts\"/>\n/// <reference path=\"../Shared/User.ts\"/>\n/// <reference path=\"../Shared/InMemoryBrowserUsers.ts\"/>\n/// <reference path=\"../ComfortZone/Mediator.ts\"/>\n\n\nvar mediator,\n    userLoader;\nrequirejs.config( {\n    baseUrl : '/'\n});\n\n\nrequire(['ComfortZone/Mediator','Shared/User','Shared/InMemoryBrowserUsers'], function(m,u,b) {\n    console.log(\"Starting\");\n    mediator = new m.Mediator(23,23);\n    console.log(mediator);\n    userLoader = new b.InMemoryBrowserUsers(window);\n    userLoader.getUsers().then(function(users) {\n        if(users) {\n            mediator.setUsers(users);\n        } else {\n            mediator.setUsers([\n                new u.User(\"Adam Hall\",\"xxx1\"), \n                new u.User(\"Billie Davey\",\"xxx2\"), \n                new u.User(\"Laura Rowe\",\"xxx3\"),\n                new u.User(\"Simon Dawson\",\"xxx4\")\n            ]);\n        }\n        \n    });\n\n    document.addEventListener(\"selectUser\", function(e:CustomEvent) {\n        mediator.selectUser(e.detail.id);\n    });\n    document.addEventListener(\"saveGraph\", function(e:CustomEvent) {\n        var o = e.detail;\n        mediator.saveGraph(o.area,o.distance,o.currentUser);\n    });\n            //;\")\n    console.log(mediator);\n});\n/*\nCommands you can throw into the mediator....\n\nmediator.setUsers([\n   {name:\"Nigel Hall\",id:\"1xx0\"}, \n   {name:\"Fred Hall\",id:\"1xx1\"}, \n   {name:\"Bob Hall\",id:\"1xx2\"} \n]);\n\nmediator.addUser({name:\"Mandy\", id:\"981298129\"})\n\n*/\n\n//import {Mediator} from 'Mediator';\n//import {User} from 'User';\n\n\n//const stage = new Comfort.Stage();\n//const mediator = new Mediator();\n/*mediator.setUsers([\n   \n]);*/\n//export mediator;\n\n","import {ComfortUserChoice} from './ComfortUserChoice';\nexport class ComfortUserChoiceHistory {\n    date :Date;\n    data : Array<ComfortUserChoice>;\n}"]}